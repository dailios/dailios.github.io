<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>D3 Bar Chart</title>
	<!-- D3 라이브러리를 불러옵니다 -->
	<script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
	<h1>D3 Bar Chart Completed</h1>
	<div id="chart"></div>

	<script>
		// data.json 파일을 불러옵니다
		d3.json("http://localhost:8000/data.json").then(function(data) {
			// SVG 요소의 크기를 지정합니다
			var svgWidth = 500, svgHeight = 300;
			// 바의 너비와 간격을 설정합니다
			var barWidth = 40, barMargin = 10;
			// 데이터의 최대값을 계산합니다
			var maxDataValue = d3.max(data, function(d) { return d.value; });
			// y축의 스케일을 설정합니다
			var yScale = d3.scaleLinear()
							.domain([0, maxDataValue])
							.range([0, svgHeight - 30]);

			// SVG 요소를 생성합니다
			var svg = d3.select("#chart")
						.append("svg")
							.attr("width", svgWidth)
							.attr("height", svgHeight);

			// 데이터에 기반하여 바를 그립니다
			svg.selectAll("rect")
				.data(data)
				.enter()
				.append("rect")
					.attr("x", function(d, i) { return i * (barWidth + barMargin); })
					.attr("y", function(d) { return svgHeight - yScale(d.value); })
					.attr("width", barWidth)
					.attr("height", function(d) { return yScale(d.value); })
					.attr("fill", "steelblue");

			// x축을 그립니다
			svg.append("line")
				.attr("x1", 0)
				.attr("y1", svgHeight - 10)
				.attr("x2", svgWidth)
				.attr("y2", svgHeight - 10)
				.attr("stroke", "black");

			// y축을 그립니다
			svg.append("line")
				.attr("x1", 0)
				.attr("y1", 10)
				.attr("x2", 0)
				.attr("y2", svgHeight - 10)
				.attr("stroke", "black");
		});
	</script>
</body>
</html>
