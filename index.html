<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3 Example</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
</head>
<body>
    <script>
        // 데이터 로드
        d3.csv("https://dailios.github.io/data.csv").then(function(data) {
            // 데이터 전처리
            data.forEach(function(d) {
                d.value = +d.value; // 문자열을 숫자로 변환
            });

            // SVG 요소의 크기 지정
            var svgWidth = 600, svgHeight = 400;
            var margin = {top: 20, right: 20, bottom: 30, left: 40};
            var width = svgWidth - margin.left - margin.right;
            var height = svgHeight - margin.top - margin.bottom;

            // SVG 요소 추가
            var svg = d3.select("#chart")
                .append("svg")
                .attr("width", svgWidth)
                .attr("height", svgHeight);

            // X축 스케일 지정
            var xScale = d3.scaleBand()
                .range([0, width])
                .padding(0.1)
                .domain(data.map(function(d) { return d.category; }));

            // Y축 스케일 지정
            var yScale = d3.scaleLinear()
                .range([height, 0])
                .domain([0, d3.max(data, function(d) { return d.value; })]);

            // X축 추가
            svg.append("g")
                .attr("transform", "translate(" + margin.left + "," + (height + margin.top) + ")")
                .call(d3.axisBottom(xScale));

            // Y축 추가
            svg.append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
                .call(d3.axisLeft(yScale));

            // 막대 그래프 추가
            svg.selectAll(".bar")
                .data(data)
                .enter()
                .append("rect")
                .attr("class", "bar")
                .attr("x", function(d) { return xScale(d.category) + margin.left; })
                .attr("y", function(d) { return yScale(d.value) + margin.top; })
                .attr("width", xScale.bandwidth())
                .attr("height", function(d) { return height - yScale(d.value); });
        });
    </script>
</body>
</html>
